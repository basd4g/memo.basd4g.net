---
title: "iphoneをmacbookのWebカメラにする"
date: 2020-04-23T19:09:02+09:00
draft: true
---

## まえがき

covid-19の流行により外出自粛が叫ばれる昨今、私は家に引きこもっている。
この状況下ではビデオ通話を利用する人も多いのではないだろうか?
少なくとも私はそうで、サークルの友人、未来の同期との連絡や、研究室のゼミなど、週に何回かビデオ通話の機会がある。

私はMacbook Air(2018)を使っているのだが、内蔵カメラが貧弱(FaceTime HDカメラ)で、いくらWebカメラ行っても令和の時代には酷い品質。16万円出して買ったのにな。

そこで代替のカメラを模索し、手元のスマホ(iphone7)の外カメラなら(内カメラでも余裕で高画質になる)良さげに写せるのではないかと思って試してみた。

## 環境構築

今回は以下のような流れになる。

- iphoneのカメラで撮影した映像をNDIで転送
- 同一LAN内のMacbook AirのOBSで映像を受け取る
- さらにOBSがPC内で仮想のWebカメラに映像を出力する
- 仮想Webカメラからビデオ通話アプリ(Zoom等)を経て、インターネットに映像を送出する


1. [OBS Studio](https://obsproject.com/ja) (Open Broadcaster Software) をMacbookにインストール

OSSの有名な動画配信用ソフト。聞いたことはあったが初めて使う。
Linux版もあるのが素晴らしい。今度入れてみようかな。

公式サイトからもダウンロードできるが、homebrew caskにあった。

```sh
$ brew cask install obs
```

フォークしたStreamLab OBSというのもあるらしい。こっちは未検証

2.  [NDI HX Camera](https://apps.apple.com/jp/app/ndi-hx-camera/id1477266080)をiphoneにインストール

NDIとは、米NewTek社のLAN用映像転送プロトコル。SDKが無償提供されている。
上記は公式が出しているアプリで、有料アプリだが5月末まで無料配信しているらしい。

3. [obs-ndi](https://github.com/Palakis/obs-ndi)をMacbookにインストール

OBSでNDI経由の映像を受け取るプラグイン
NDI macOS runtimeも必要なようで、これも一緒に入れる。(どちらも[releaseページ](https://github.com/Palakis/obs-ndi/releases)から入手可能)

homebrewにはなかった

4. 



## 没になった方法

- iV cam (iphone app) ... iphoneをカメラをPCにWebカメラとして認識させるツール Mac版アプリケーションがなく使えない
- EpocCam ... iphoneをカメラをPCにWebカメラとして認識させるツール。最新版ZoomではWebカメラとして認識してくれない。(Skypeはいけた)
- 自宅のコンデジ(Nikon P7100)をHDMI出力させて、キャプチャーボードでPCに取り込む。HDMIキャプチャボードは1万円代前半くらいから売っている。
- IP Webcam(Android App) ... Android端末がHTTPサーバとなり動画を配信するアプリ。OBS上でURLを入力すると、OBS内でブラウザがレンダリングしキャプチャしてくれるらしい。NDIのほうが早そう(そのうち調査予定)

iphone+Windows, Android+Windowsの組み合わせならもっと選択肢が増えそう。
現在の懸念は、OBSがそれなりにCPUパワーを食ってしまいそうなこと。

## ビデオ通話アプリの感想

自宅の光VDSL回線(普段は30Mbps、遅いと2Mbps、早いと50MBps)での感想

- Google Hangout

ちょっとしか使ってない。これから機会が増える予定

- Cisco WebX

ホスト以外はアカウントがいらない
通話時間は40分の制限がある。
遅延などはzoom波で特に気にならない気がする
普通にインストールしてたらスタートアップ登録されてろログイン時立ち上がってきたのでムカついた(情弱の感想)

- Zoom.us

ホスト以外はアカウントがいらない
有料アカウント保持者なしで3人以上で通話すると、40分の制限がある。が、学生(登録メールアドレスがac.jp)が1人以上いると、現在制限解除中。
セキュリティ面での問題が噂になっている。
帯域の太さに対しての通話の遅延は一番少ない気がする
バーチャル背景（好きな画像が背景に設定できる)
画面共有のUIが良い。あと、AirPlayに対応していて、iphone画面もMacから共有できる。

- Skype

老舗なだけあって設定画面は洗練、充実していて、Skype音声テストで一人で通話状況を確認できる機能まである。素晴らしい。
背景をぼかせる。
割と固まる機会が多かった。環境依存なだけかも。太い帯域が必要？
昔は普通に使えていたのだけれど。要調査。

- LINE

誰でもアプリを持っているのが強み。(国内MAU8000万人はは強い。。。)
ビデオ通話の質は悪い。
音声も、複数人同時に会話をすると、会話がままならないレベル。
一人でし喋って１いるのを聞き取ることはできるが、複数人同時に喋る機会があると(遅延でなりやすい)、誰が喋ってるかすら不明。

- Apper.in

とかも就活で使った気がする。

